<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cursor Lilac Flame - Canvas 2D</title>
  <style>
    html,body { height:100%; margin:0; background:#0b0710; overflow:hidden; }
    canvas { display:block; width:100vw; height:100vh; }
  </style>
</head>
<body>
  <canvas id="c"></canvas>

  <script>
  // Canvas 2D Lilac Flame (cursor-following blobs)
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d', { alpha: true });

  function resize() {
    canvas.width = innerWidth * devicePixelRatio;
    canvas.height = innerHeight * devicePixelRatio;
    canvas.style.width = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
    ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
  }
  addEventListener('resize', resize);
  resize();

  // mouse
  const mouse = { x: innerWidth / 2, y: innerHeight / 2, down: false };
  addEventListener('mousemove', (e) => { mouse.x = e.clientX; mouse.y = e.clientY; });
  addEventListener('mousedown', () => mouse.down = true);
  addEventListener('mouseup', () => mouse.down = false);

  // particles that follow cursor with easing
  const N = 22; // number of blobs
  const blobs = [];
  for (let i = 0; i < N; i++) {
    blobs.push({
      x: mouse.x,
      y: mouse.y,
      vx: (Math.random() - 0.5) * 0.4,
      vy: (Math.random() - 0.5) * 0.4,
      size: 40 + Math.random() * 120,
      hue: 260 + Math.random() * 40, // lilac/purple spectrum
      alpha: 0.06 + Math.random() * 0.22,
      lag: 0.07 + Math.random() * 0.18
    });
  }

  // main loop
  let last = performance.now();
  function loop(t) {
    const dt = Math.min(40, t - last);
    last = t;

    // subtle background fade (keeps motion trails)
    ctx.fillStyle = 'rgba(8,6,12,0.18)';
    ctx.fillRect(0, 0, innerWidth, innerHeight);

    // optional: add a faint noise overlay or gradient (comment out if not wanted)
    // drawBlobs
    ctx.globalCompositeOperation = 'lighter'; // additive blending for glow
    for (let i = 0; i < blobs.length; i++) {
      const b = blobs[i];

      // ease towards mouse with some velocity + randomness (creates fluid motion)
      const dx = mouse.x - b.x + Math.sin(t * 0.002 + i) * 10;
      const dy = mouse.y - b.y + Math.cos(t * 0.0015 + i * 1.5) * 10;
      b.vx += dx * b.lag * 0.01;
      b.vy += dy * b.lag * 0.01;

      // friction
      b.vx *= 0.92;
      b.vy *= 0.92;

      b.x += b.vx * (dt * 0.06);
      b.y += b.vy * (dt * 0.06);

      // size pulsation
      const s = b.size * (0.8 + 0.2 * Math.sin(t * 0.003 + i));

      // draw a radial gradient circle with shadow for soft glow
      const g = ctx.createRadialGradient(b.x, b.y, 0, b.x, b.y, s);
      const c1 = `hsla(${b.hue}, 85%, 65%, ${Math.min(1, b.alpha * 6)})`;
      const c2 = `hsla(${b.hue}, 65%, 45%, ${b.alpha})`;
      g.addColorStop(0, c1);
      g.addColorStop(0.15, c2);
      g.addColorStop(0.55, `hsla(${b.hue}, 60%, 20%, ${b.alpha * 0.12})`);
      g.addColorStop(1, `rgba(0,0,0,0)`);

      // very soft shadow for "bloom" effect
      ctx.shadowBlur = 40;
      ctx.shadowColor = c1;
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(b.x, b.y, s, 0, Math.PI * 2);
      ctx.fill();
    }

    // optional: draw a subtle circle at the true cursor position to anchor the effect
    ctx.shadowBlur = 0;
    ctx.globalCompositeOperation = 'source-over';
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
  </script>
</body>
</html>
